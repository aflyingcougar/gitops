---
apiVersion: opentelemetry.io/v1alpha1
kind: OpenTelemetryCollector
metadata:
  name: host-logging
spec:
  mode: daemonset
  image: otel/opentelemetry-collector-contrib:0.80.0
  config: |
    receivers:
      filelog:
        include:
          - /var/log/syslog
          - /var/log/pods/*
    processors:
      batch:
    exporters:
      logging:
        logLevel: debug
      loki:
        endpoint: "http://linmon.heyjohn.family:3100/loki/api/v1/push"
        #tenant_id: "example2"
        labels:
          attributes:
            log.file.name: "filename"
    service:
      pipelines:
        logs:
          receivers:
            - filelog
          processors:
            - batch
          exporters:
            - logging
            - loki
