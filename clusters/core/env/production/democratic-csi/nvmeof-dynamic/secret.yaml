---
apiVersion: v1
kind: Secret
metadata:
  name: dcsi
stringData:
  driver-config-file.yaml: |
    driver: zfs-generic-nvmeof
    sshConnection:
      host: "192.168.130.50"
      port: "22"
      username: ${DCSI_NVMEOF_USER}
      password: ${DCSI_NVMEOF_PASSWORD}
    zfs:
      cli:
        sudoEnabled: true
      datasetProperties:
        "org.freenas:description": "{{`{{ parameters.[csi.storage.k8s.io/pvc/name] }}`}}"
      datasetParentName: apollo/nvmeof
      detachedSnapshotsDatasetParentName: apollo/snapshots/nvmeof
      zvolCompression: true
      zvolDedup: false
      zvolEnableReservation: false
      zvolBlocksize: 16k
    nvmeof:
      transports:
        - "tcp://192.168.130.49:4420?ctrl-loss-tmo=30"
      namePrefix: ""
      nameSuffix: ""
      shareStrategy: nvmetCli
      shareStrategyNvmetCli:
        sudoEnabled: true
        configPath: /mnt/wd-pool/nvmeof/nvmet-config.json
        configIsImportedFilePath: /run/nvmet-config-loaded
        basename: nqn.2003-01.org.linux-nvmeof.ubuntu-19.x8664
        ports:
          - "1"
        subsystem:
          attributes:
            allow_any_host: 1
